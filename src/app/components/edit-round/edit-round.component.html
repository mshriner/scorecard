<form>
  <div class="full-width-center">
    <mat-form-field class="almost-full-width-input">
      <mat-label>Select Course</mat-label>
      <mat-select
        [(value)]="editingRound.courseId"
        (selectionChange)="updateCurrentCourse($event.value)"
      >
        @for (course of coursesToChooseFrom; track $index) {
        <mat-option value="{{ course.id }}"
          >{{ course.name }} (Par {{ course | par }})</mat-option
        >
        }
      </mat-select>
    </mat-form-field>
  </div>

  <table mat-table [dataSource]="editingRound.strokes">
    @for (column of ROUND_TABLE_COLUMNS; track $index) {
    <ng-container [matColumnDef]="column.columnDef">
      <th mat-header-cell *matHeaderCellDef class="center-text">
        {{ column.header }}
      </th>
      <td
        mat-cell
        *matCellDef="let row; let index = index"
        class="center-text"
        style="padding-inline: 4px"
      >
        @switch (column.columnDef) { @case (HOLE_COL) {
        {{ index + 1 }}
        @if (currentCourse?.par?.length) {
        <br />
        Par {{ currentCourse!.par[index] }}
        } } @case (STROKES_COL) {
        <div class="hole-par-adjustment">
          <button
            mat-icon-button
            class="plusminus"
            (click)="strokesMinusOne(index)"
          >
            <mat-icon>remove</mat-icon>
          </button>
          <div class="par-value-box">
            {{ editingRound.strokes[index] }}
          </div>
          <button
            mat-icon-button
            class="plusminus"
            (click)="strokesPlusOne(index)"
          >
            <mat-icon>add</mat-icon>
          </button>
        </div>
        } @case (PUTTS_COL) {
        <div class="hole-par-adjustment">
          <button
            mat-icon-button
            class="plusminus"
            (click)="puttsMinusOne(index)"
          >
            <mat-icon>remove</mat-icon>
          </button>
          <div class="par-value-box">
            {{ editingRound.putts[index] }}
          </div>
          <button
            mat-icon-button
            class="plusminus"
            (click)="puttsPlusOne(index)"
          >
            <mat-icon>add</mat-icon>
          </button>
        </div>
        } }
      </td>
      <td mat-footer-cell *matFooterCellDef class="center-text border-top">
        @switch (column.columnDef) { @case (HOLE_COL) { Total } @case
        (STROKES_COL) {
        {{ editingRound | totalRoundScore }}
        @if (currentCourse) { ({{ editingRound | scoreToPar }}) } } @case
        (PUTTS_COL) {
        {{ editingRound | totalPutts }}
        } }
      </td>
    </ng-container>
    }

    <tr
      mat-header-row
      *matHeaderRowDef="ROUND_TABLE_COLUMN_IDS; sticky: true"
    ></tr>
    <tr mat-row *matRowDef="let row; columns: ROUND_TABLE_COLUMN_IDS"></tr>
    <tr
      mat-footer-row
      *matFooterRowDef="ROUND_TABLE_COLUMN_IDS; sticky: true"
    ></tr>
  </table>

  <br />
  <div class="full-width-center">
    <button
      mat-stroked-button
      (click)="saveRound()"
      [disabled]="disableSaveButton"
    >
      Save
    </button>
  </div>
</form>
<br />
